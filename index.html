<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√¥ng C·ª• C·ªßa T√¥i - ƒêang ho·∫°t ƒë·ªông!</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
            background: #0a0a0a;
            color: white;
        }
        h1 {
            color: #3b82f6;
            font-size: 2.5rem;
        }
        .status {
            padding: 20px;
            margin: 30px auto;
            max-width: 500px;
            background: #1a1a1a;
            border-radius: 10px;
            border: 1px solid #333;
        }
        .tool {
            background: #1a1a1a;
            padding: 20px;
            margin: 20px auto;
            max-width: 400px;
            border-radius: 10px;
            border: 1px solid #333;
        }
        input, button {
            padding: 12px;
            margin: 10px;
            width: 90%;
            border-radius: 5px;
            border: 1px solid #444;
            background: #222;
            color: white;
        }
        button {
            background: #3b82f6;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>üîß C√¥ng C·ª• C·ªßa T√¥i</h1>
    <p>C√¥ng c·ª• t·∫£i video Facebook, TikTok mi·ªÖn ph√≠</p>
    
    <div class="status">
        <h3>Tr·∫°ng th√°i h·ªá th·ªëng</h3>
        <p>API: <span id="apiStatus">ƒêang ki·ªÉm tra...</span></p>
        <p>Website: <span id="webStatus">‚úÖ ƒêang ho·∫°t ƒë·ªông</span></p>
        <p>Deploy: <span id="deployStatus">‚úÖ Vercel Ready</span></p>
    </div>
    
    <div class="tool">
        <h3>üìò Facebook Downloader</h3>
        <input type="text" id="fbUrl" placeholder="D√°n link Facebook...">
        <button onclick="downloadFB()">T·∫£i Video</button>
    </div>
    
    <div class="tool">
        <h3>üéµ TikTok Downloader</h3>
        <input type="text" id="ttUrl" placeholder="D√°n link TikTok...">
        <button onclick="downloadTT()">T·∫£i Video</button>
    </div>
    
    <div id="message" style="display:none; padding:15px; margin:20px auto; max-width:500px; background:#1a1a1a; border-radius:5px;"></div>
    
    <script>
        // Ki·ªÉm tra API
        fetch('/api/health')
            .then(r => r.json())
            .then(data => {
                document.getElementById('apiStatus').textContent = '‚úÖ ƒêang ho·∫°t ƒë·ªông';
                document.getElementById('apiStatus').style.color = '#10b981';
                console.log('API Response:', data);
            })
            .catch(e => {
                document.getElementById('apiStatus').textContent = '‚ö†Ô∏è ƒêang b·∫£o tr√¨';
                document.getElementById('apiStatus').style.color = '#f59e0b';
            });
        
        function showMsg(text, type = 'info') {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.style.display = 'block';
            msg.style.borderLeft = '4px solid ' + 
                (type === 'error' ? '#ef4444' : 
                 type === 'success' ? '#10b981' : '#3b82f6');
            setTimeout(() => msg.style.display = 'none', 5000);
        }
        
        function downloadFB() {
            const url = document.getElementById('fbUrl').value;
            if (!url) return showMsg('Vui l√≤ng nh·∫≠p URL Facebook', 'error');
            showMsg('ƒêang x·ª≠ l√Ω video Facebook...', 'info');
            
            fetch('/api/facebook/download', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ url: url })
            })
            .then(r => r.json())
            .then(data => {
                showMsg('‚úÖ ' + data.message, 'success');
            })
            .catch(e => {
                showMsg('‚ùå L·ªói k·∫øt n·ªëi', 'error');
            });
        }
        
        function downloadTT() {
            const url = document.getElementById('ttUrl').value;
            if (!url) return showMsg('Vui l√≤ng nh·∫≠p URL TikTok', 'error');
            showMsg('ƒêang x·ª≠ l√Ω video TikTok...', 'info');
            
            fetch('/api/tiktok/download', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ url: url })
            })
            .then(r => r.json())
            .then(data => {
                showMsg('‚úÖ ' + data.message, 'success');
            })
            .catch(e => {
                showMsg('‚ùå L·ªói k·∫øt n·ªëi', 'error');
            });
        }
    </script>
</body>
</html>
